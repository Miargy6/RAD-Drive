(this["webpackJsonpfirebase-react-auth"]=this["webpackJsonpfirebase-react-auth"]||[]).push([[0],{101:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(15),c=a.n(l),o=a(21),s=a.n(o),u=a(33),i=a(9),m=a(119),d=a(110),p=a(114),f=a(77),E=a(7),b=a(70),h=a.n(b),g=(a(85),a(87),a(103),a(90),h.a.initializeApp({apiKey:"AIzaSyD9O0cqSDwMm6bq8lq9jgPXX2xLp1iRs2g",authDomain:"rad-drive-9596f.firebaseapp.com",projectId:"rad-drive-9596f",storageBucket:"rad-drive-9596f.appspot.com",messagingSenderId:"501462829820",appId:"1:501462829820:web:11011cf7085adae33d6579"})),v=g.firestore(),y={folders:v.collection("folders"),files:v.collection("files"),tableData:v.collection("tableData"),formatDoc:function(e){return Object(E.a)({id:e.id},e.data())},getCurrentTimestamp:h.a.firestore.FieldValue.serverTimestamp},j=g.storage(),O=g.auth(),w=(g.database().ref(),r.a.createContext());function x(){return Object(n.useContext)(w)}function N(e){var t=e.children,a=Object(n.useState)(),l=Object(i.a)(a,2),c=l[0],o=l[1],s=Object(n.useState)(!0),u=Object(i.a)(s,2),m=u[0],d=u[1];Object(n.useEffect)((function(){return O.onAuthStateChanged((function(e){o(e),d(!1)}))}),[]);var p={currentUser:c,login:function(e,t){return O.signInWithEmailAndPassword(e,t)},signup:function(e,t){return O.createUserWithEmailAndPassword(e,t)},logout:function(){return O.signOut()},resetPassword:function(e){return O.sendPasswordResetEmail(e)},updateEmail:function(e){return c.updateEmail(e)},updatePassword:function(e){return c.updatePassword(e)}};return r.a.createElement(w.Provider,{value:p},!m&&t)}var k=a(12),F=a(11),L=a(109);a(39);function C(e){var t=e.children;return r.a.createElement(L.a,{className:" containerLogin"},r.a.createElement("div",{className:"area-logo"},t))}function S(){var e=Object(n.useRef)(),t=Object(n.useRef)(),a=Object(n.useRef)(),l=x().signup,c=Object(n.useState)(""),o=Object(i.a)(c,2),E=o[0],b=o[1],h=Object(n.useState)(!1),g=Object(i.a)(h,2),v=g[0],y=g[1],j=Object(k.g)();function O(){return(O=Object(u.a)(s.a.mark((function n(r){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),t.current.value===a.current.value){n.next=3;break}return n.abrupt("return",b("Passwords do not match"));case 3:return n.prev=3,b(""),y(!0),n.next=8,l(e.current.value,t.current.value);case 8:j.push("/"),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(3),b("Failed to create an account");case 14:y(!1);case 15:case"end":return n.stop()}}),n,null,[[3,11]])})))).apply(this,arguments)}return r.a.createElement(C,null,r.a.createElement(m.a,{style:{background:"none"}},r.a.createElement(m.a.Body,{className:"login"},r.a.createElement("div",null,r.a.createElement("img",{src:"./Logo.png",alt:"Logo"})),r.a.createElement("h2",{className:"text-center mb-4"},"Sign Up"),E&&r.a.createElement(d.a,{variant:"danger"},E),r.a.createElement(p.a,{onSubmit:function(e){return O.apply(this,arguments)},className:"form"},r.a.createElement(p.a.Group,{id:"email"},r.a.createElement(p.a.Label,null,"Email"),r.a.createElement(p.a.Control,{type:"email",className:"input",ref:e,required:!0})),r.a.createElement(p.a.Group,{id:"password"},r.a.createElement(p.a.Label,null,"Password"),r.a.createElement(p.a.Control,{type:"password",className:"input",ref:t,required:!0})),r.a.createElement(p.a.Group,{id:"password-confirm"},r.a.createElement(p.a.Label,null,"Password Confirmation"),r.a.createElement(p.a.Control,{type:"password",className:"input",ref:a,required:!0})),r.a.createElement(f.a,{disabled:v,className:"input bt mt-3",type:"submit"},"Sign Up")),r.a.createElement("div",{className:"w-100 text-center mt-2"},r.a.createElement("span",null,"Already have an account? "),r.a.createElement(F.b,{to:"/login"},"Log In")))))}function I(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],l=t[1],c=x(),o=c.currentUser,p=c.logout,E=Object(k.g)();function b(){return(b=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(""),e.prev=1,e.next=4,p();case 4:E.push("/login"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),l("Failed to log out");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return r.a.createElement(C,null,r.a.createElement(m.a,{style:{background:"none"}},r.a.createElement(m.a.Body,{className:"login"},r.a.createElement("div",null,r.a.createElement("img",{src:"./Logo.png",alt:"Logo"})),r.a.createElement("h2",{className:"text-center mb-4"},"Profile"),a&&r.a.createElement(d.a,{variant:"danger"},a),r.a.createElement("strong",null,"Email:")," ",o.email,r.a.createElement(F.b,{to:"/update-profile",className:"btn input bt btn-primary w-100 mt-3"},"Update Profile"),r.a.createElement("div",{className:"w-100 text-center mt-2"},r.a.createElement(f.a,{variant:"link",onClick:function(){return b.apply(this,arguments)}},"Log Out")),r.a.createElement("div",{className:"w-100 text-center mt-2"},r.a.createElement(F.b,{to:"/"},"Home")))))}function D(){var e=Object(n.useRef)(),t=Object(n.useRef)(),a=x().login,l=Object(n.useState)(""),c=Object(i.a)(l,2),o=c[0],E=c[1],b=Object(n.useState)(!1),h=Object(i.a)(b,2),g=h[0],v=h[1],y=Object(k.g)();function j(){return(j=Object(u.a)(s.a.mark((function n(r){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),n.prev=1,E(""),v(!0),n.next=6,a(e.current.value,t.current.value);case 6:y.push("/"),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),E("Failed to log in");case 12:v(!1);case 13:case"end":return n.stop()}}),n,null,[[1,9]])})))).apply(this,arguments)}return r.a.createElement(C,null,r.a.createElement(m.a,{style:{background:"none"}},r.a.createElement(m.a.Body,{className:"login"},r.a.createElement("div",null,r.a.createElement("img",{src:"./Logo.png",alt:"Logo"})),r.a.createElement("h2",{className:"text-center mb-4"},"Log In"),o&&r.a.createElement(d.a,{variant:"danger"},o),r.a.createElement(p.a,{onSubmit:function(e){return j.apply(this,arguments)},className:"form"},r.a.createElement(p.a.Group,{id:"email"},r.a.createElement(p.a.Label,null,"Email"),r.a.createElement(p.a.Control,{type:"email",className:"input",ref:e,required:!0})),r.a.createElement(p.a.Group,{id:"password"},r.a.createElement(p.a.Label,null,"Password"),r.a.createElement(p.a.Control,{type:"password",className:"input",ref:t,required:!0})),r.a.createElement(f.a,{disabled:g,className:"input bt mt-3",type:"submit"},"Log In")),r.a.createElement("div",{className:"w-100 text-center mt-3"},r.a.createElement(F.b,{to:"/forgot-password"},"Forgot Password?")),r.a.createElement("div",{className:"w-100 text-center mt-3"},r.a.createElement("span",null,"Don't have an account? "),r.a.createElement(F.b,{to:"/signup"},"Sign In")))))}var P=a(54);function R(e){var t=e.component,a=Object(P.a)(e,["component"]),n=x().currentUser;return r.a.createElement(k.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,e):r.a.createElement(k.a,{to:"/login"})}}))}function B(){var e=Object(n.useRef)(),t=x().resetPassword,a=Object(n.useState)(""),l=Object(i.a)(a,2),c=l[0],o=l[1],E=Object(n.useState)(""),b=Object(i.a)(E,2),h=b[0],g=b[1],v=Object(n.useState)(!1),y=Object(i.a)(v,2),j=y[0],O=y[1];function w(){return(w=Object(u.a)(s.a.mark((function a(n){return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),a.prev=1,g(""),o(""),O(!0),a.next=7,t(e.current.value);case 7:g("Check your inbox for further instructions"),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(1),o("Failed to reset password");case 13:O(!1);case 14:case"end":return a.stop()}}),a,null,[[1,10]])})))).apply(this,arguments)}return r.a.createElement(C,null,r.a.createElement(m.a,{style:{background:"none"}},r.a.createElement(m.a.Body,{className:"login"},r.a.createElement("div",null,r.a.createElement("img",{src:"./Logo.png",alt:"Logo"})),r.a.createElement("h2",{className:"text-center mb-4"},"Password Reset"),c&&r.a.createElement(d.a,{variant:"danger"},c),h&&r.a.createElement(d.a,{variant:"success"},h),r.a.createElement(p.a,{onSubmit:function(e){return w.apply(this,arguments)},className:"form"},r.a.createElement(p.a.Group,{id:"email"},r.a.createElement(p.a.Label,null,"Email"),r.a.createElement(p.a.Control,{type:"email",className:"input",ref:e,required:!0})),r.a.createElement(f.a,{disabled:j,className:"bt input mt-3",type:"submit"},"Reset Password")),r.a.createElement("div",{className:"w-100 text-center mt-3"},r.a.createElement(F.b,{to:"/login"},"Login")))))}function A(){var e=Object(n.useRef)(),t=Object(n.useRef)(),a=Object(n.useRef)(),l=x(),c=l.currentUser,o=l.updatePassword,s=l.updateEmail,u=Object(n.useState)(""),E=Object(i.a)(u,2),b=E[0],h=E[1],g=Object(n.useState)(!1),v=Object(i.a)(g,2),y=v[0],j=v[1],O=Object(k.g)();return r.a.createElement(C,null,r.a.createElement(m.a,{style:{background:"none"}},r.a.createElement(m.a.Body,{className:"login"},r.a.createElement("div",null,r.a.createElement("img",{src:"./Logo.png",alt:"Logo"})),r.a.createElement("h2",{className:"text-center mb-4"},"Update Profile"),b&&r.a.createElement(d.a,{variant:"danger"},b),r.a.createElement(p.a,{onSubmit:function(n){if(n.preventDefault(),t.current.value!==a.current.value)return h("Passwords do not match");var r=[];j(!0),h(""),e.current.value!==c.email&&r.push(s(e.current.value)),t.current.value&&r.push(o(t.current.value)),Promise.all(r).then((function(){O.push("/user")})).catch((function(){h("Failed to update account")})).finally((function(){j(!1)}))},className:"form"},r.a.createElement(p.a.Group,{id:"email"},r.a.createElement(p.a.Label,null,"Email"),r.a.createElement(p.a.Control,{type:"email",ref:e,required:!0,defaultValue:c.email,className:"input"})),r.a.createElement(p.a.Group,{id:"password"},r.a.createElement(p.a.Label,null,"Password"),r.a.createElement(p.a.Control,{type:"password",ref:t,placeholder:"Leave blank to keep the same",className:"input"})),r.a.createElement(p.a.Group,{id:"password-confirm"},r.a.createElement(p.a.Label,null,"Password Confirmation"),r.a.createElement(p.a.Control,{type:"password",ref:a,placeholder:"Leave blank to keep the same",className:"input"})),r.a.createElement(f.a,{disabled:y,className:"input bt mt-3",type:"submit"},"Update")),r.a.createElement("div",{className:"w-100 text-center mt-2"},r.a.createElement(F.b,{to:"/user"},"Cancel")),r.a.createElement("div",{className:"w-100 text-center mt-2"},r.a.createElement(F.b,{to:"/"},"Home")))))}var U="select-folder",T="update-folder",q="set-child-folders",G="set-child-files",H="set-child-table-data",W={name:"Home",id:null,path:[]};function M(e,t){var a=t.type,n=t.payload;switch(a){case U:return{folderId:n.folderId,folder:n.folder,childFiles:[],childFolders:[],childTableData:[]};case T:return Object(E.a)(Object(E.a)({},e),{},{folder:n.folder});case q:return Object(E.a)(Object(E.a)({},e),{},{childFolders:n.childFolders});case G:return Object(E.a)(Object(E.a)({},e),{},{childFiles:n.childFiles});case H:return Object(E.a)(Object(E.a)({},e),{},{childTableData:n.childTableData});default:return e}}var z=a(28),V=a(113),J=a(42),X=a(43);function K(e){var t=e.currentFolder,a=Object(n.useState)(!1),l=Object(i.a)(a,2),c=l[0],o=l[1],s=Object(n.useState)(""),u=Object(i.a)(s,2),m=u[0],d=u[1],E=x().currentUser;function b(){o(!1)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{onClick:function(){o(!0)},variant:"outline-primary",size:"md",className:"my-3",title:"Add Folder"},r.a.createElement(J.a,{icon:X.c})),r.a.createElement(V.a,{show:c,onHide:b},r.a.createElement(p.a,{onSubmit:function(e){if(e.preventDefault(),null!=t){var a=Object(z.a)(t.path);t!==W&&a.push({name:t.name,id:t.id}),y.folders.add({name:m,parentId:t.id,userId:E.uid,path:a,createdAt:y.getCurrentTimestamp()}),d(""),b()}}},r.a.createElement(V.a.Body,null,r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Folder Name"),r.a.createElement(p.a.Control,{type:"text",required:!0,value:m,onChange:function(e){return d(e.target.value)}}))),r.a.createElement(V.a.Footer,null,r.a.createElement(f.a,{variant:"secondary",onClick:b},"Close"),r.a.createElement(f.a,{variant:"primary",type:"submit"},"Add Folder")))))}var _=a(118),Q=a(116),Y=a(120);function Z(e){var t=e.currentFolder,a=Object(n.useState)([]),l=Object(i.a)(a,2),o=l[0],s=l[1],u=x().currentUser;return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:"btn btn-outline-primary btn-md my-3 mx-2",title:"Upload Photo"},r.a.createElement(J.a,{icon:X.a}),r.a.createElement("input",{type:"file",onChange:function(e){var a=e.target.files[0];if(null!=t&&null!=a){var n=Object(_.a)();s((function(e){return[].concat(Object(z.a)(e),[{id:n,name:a.name,progress:0,error:!1}])}));var r=t===W?"".concat(t.path.join("/"),"/").concat(a.name):"".concat(t.path.join("/"),"/").concat(t.name,"/").concat(a.name),l=j.ref("/files/".concat(u.uid,"/").concat(r)).put(a);l.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes;s((function(e){return e.map((function(e){return e.id===n?Object(E.a)(Object(E.a)({},e),{},{progress:t}):e}))}))}),(function(){s((function(e){return e.map((function(e){return e.id===n?Object(E.a)(Object(E.a)({},e),{},{error:!0}):e}))}))}),(function(){s((function(e){return e.filter((function(e){return e.id!==n}))})),l.snapshot.ref.getDownloadURL().then((function(e){y.files.where("name","==",a.name).where("userId","==",u.uid).where("folderId","==",t.id).get().then((function(n){var r=n.docs[0];r?r.ref.update({url:e}):y.files.add({url:e,name:a.name,createdAt:y.getCurrentTimestamp(),folderId:t.id,userId:u.uid})}))}))}))}},style:{opacity:0,position:"absolute",left:"-9999px"}})),o.length>0&&c.a.createPortal(r.a.createElement("div",{style:{position:"absolute",bottom:"1rem",right:"1rem",maxWidth:"250px"}},o.map((function(e){return r.a.createElement(Q.a,{key:e.id,onClose:function(){s((function(t){return t.filter((function(t){return t.id!==e.id}))}))}},r.a.createElement(Q.a.Header,{closeButton:e.error,className:"text-truncate w-100 d-block"},e.name),r.a.createElement(Q.a.Body,null,r.a.createElement(Y.a,{animated:!e.error,variant:e.error?"danger":"primary",now:e.error?100:100*e.progress,label:e.error?"Error":"".concat(Math.round(100*e.progress),"%")})))}))),document.body))}var $=a(112),ee=a(111),te=a(48);function ae(e){var t=e.folder,a=Object(n.useState)(!1),l=Object(i.a)(a,2),c=l[0],o=l[1],s=function(){return o(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(V.a,{show:c,onHide:s},r.a.createElement(V.a.Header,{closeButton:!0},r.a.createElement(V.a.Title,null,"Delete folder")),r.a.createElement(V.a.Body,null,"Are you sure want to delete ",t.name),r.a.createElement(V.a.Footer,null,r.a.createElement(f.a,{variant:"secondary",onClick:s},"Cancel"),r.a.createElement(f.a,{variant:"danger",onClick:function(){y.folders.doc(t.id).delete().then((function(){te.a.success("Folder deleted succesfully!")})).catch((function(e){te.a.error(e)})),s()}},"Delete"))),r.a.createElement($.a,{alignRight:!0,as:ee.a},r.a.createElement(f.a,{to:{pathname:"/folder/".concat(t.id),state:{folder:t}},variant:"outline-dark",className:"text-truncate",as:F.b,style:{width:"200px"},title:t.name},r.a.createElement(J.a,{icon:X.b,className:"mr-2"}),t.name),r.a.createElement($.a.Toggle,{split:!0,variant:"outline-dark"}),r.a.createElement($.a.Menu,null,r.a.createElement($.a.Item,{as:"button",onClick:function(){return o(!0)}},"Delete"))))}var ne=a(117),re=a(115);a(74);function le(){return r.a.createElement("div",{className:"bg-light"},r.a.createElement(ne.a,{expand:"xxxl",className:"mx-4 mb-2 navbar"},r.a.createElement(ne.a.Brand,{as:F.b,to:"/"},r.a.createElement("div",{className:"navbar-logo"},r.a.createElement("img",{src:"./Logo.png",alt:"Logo"}),r.a.createElement("h4",{className:"mt-2 font-weight-bold"},"RAD DRIVE"))),r.a.createElement(re.a,{className:"user mt-2"},r.a.createElement(re.a.Link,{as:F.b,to:"/user"},r.a.createElement("h5",null,"User")))))}var ce=a(121);function oe(e){var t=e.currentFolder,a=t===W?[]:[W];return t&&(a=[].concat(Object(z.a)(a),Object(z.a)(t.path))),r.a.createElement(ce.a,{className:"flex-grow-1 justify-content-around ",listProps:{className:"bg-white pl-0 m-0"}},a.map((function(e,t){return r.a.createElement(ce.a.Item,{key:e.id,linkAs:F.b,linkProps:{to:{pathname:e.id?"/folder/".concat(e.id):"/",state:{folder:Object(E.a)(Object(E.a)({},e),{},{path:a.slice(1,t)})}}},className:"text-truncate d-flex justify-content-around ",style:{maxWidth:"150px"}},e.name)})),t&&r.a.createElement(ce.a.Item,{className:"text-truncate d-flex justify-content-around font-weight-bold",style:{maxWidth:"200px"},active:!0},t.name))}var se=a(66),ue=a(78);function ie(){var e=Object(k.i)().folderId,t=Object(k.h)().state,a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=Object(n.useReducer)(M,{folderId:e,folder:t,childFolders:[],childFiles:[],childTableData:[]}),r=Object(i.a)(a,2),l=r[0],c=r[1],o=x(),s=o.currentUser;return Object(n.useEffect)((function(){c({type:U,payload:{folderId:e,folder:t}})}),[e,t]),Object(n.useEffect)((function(){if(null==e)return c({type:T,payload:{folder:W}});y.folders.doc(e).get().then((function(e){c({type:T,payload:{folder:y.formatDoc(e)}})})).catch((function(){c({type:T,payload:{folder:W}})}))}),[e]),Object(n.useEffect)((function(){return y.folders.where("parentId","==",e).where("userId","==",s.uid).orderBy("createdAt").onSnapshot((function(e){c({type:q,payload:{childFolders:e.docs.map(y.formatDoc)}})}))}),[e,s]),Object(n.useEffect)((function(){return y.files.where("folderId","==",e).where("userId","==",s.uid).orderBy("createdAt").onSnapshot((function(e){c({type:G,payload:{childFiles:e.docs.map(y.formatDoc)}})}))}),[e,s]),Object(n.useEffect)((function(){return y.tableData.where("folderId","==",e).orderBy("createdAt").onSnapshot((function(e){c({type:H,payload:{childTableData:e.docs.map(y.formatDoc)}})}))}),[e]),l}(e,(void 0===t?{}:t).folder),l=a.folder,c=a.childFolders,o=a.childFiles;return r.a.createElement(r.a.Fragment,null,r.a.createElement(le,null),r.a.createElement(L.a,{fluid:!0},r.a.createElement("div",{className:"d-flex justify-content-between align-item-top mx-4 my-0 MainContainer"},r.a.createElement(oe,{currentFolder:l}),r.a.createElement(Z,{currentFolder:l}),r.a.createElement(K,{currentFolder:l})),c.length>0&&r.a.createElement("div",{className:"flex-wrap d-flex justify-content-between m-4 "},c.map((function(e){return r.a.createElement("div",{key:e.id,style:{maxWidth:"250px"},className:"p-2"},r.a.createElement(ae,{folder:e}))}))),c.length>0&&o.length>0&&r.a.createElement("hr",null),o.length>0&&r.a.createElement("div",{className:"m-4 TableDetailsMaster d-flex "},r.a.createElement(se.a,{className:"SRLWrapper"},r.a.createElement("div",{id:"app",className:"photo"},o.map((function(e,t){return r.a.createElement("div",{className:"m-3 position-relative d-flex flex-wrap photo",key:t},r.a.createElement("a",{href:e.url},r.a.createElement("img",{src:e.url,id:"photo"})),r.a.createElement("div",{className:"delete-top-button",id:"deleteBt"},r.a.createElement(f.a,{variant:"",title:"Delete Photo",className:"btn-outline-danger",onClick:function(){var t;t=e.id,y.files.doc(t).delete().then((function(){te.a.success("File deleted succesfully!")})).catch((function(e){te.a.error(e)}))}},r.a.createElement(ue.a,null))))})))))))}var me=function(){return r.a.createElement(F.a,null,r.a.createElement(N,null,r.a.createElement(k.d,null,r.a.createElement(R,{exact:!0,path:"/",component:ie}),r.a.createElement(R,{exact:!0,path:"/folder/:folderId",component:ie}),r.a.createElement(R,{path:"/user",component:I}),r.a.createElement(R,{path:"/update-profile",component:A}),r.a.createElement(k.b,{path:"/signup",component:S}),r.a.createElement(k.b,{path:"/login",component:D}),r.a.createElement(k.b,{path:"/forgot-password",component:B}))))};a(100);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(se.b,null,r.a.createElement(me,null))),document.getElementById("root"))},39:function(e,t,a){},74:function(e,t,a){},79:function(e,t,a){e.exports=a(101)}},[[79,1,2]]]);
//# sourceMappingURL=main.a929ef99.chunk.js.map