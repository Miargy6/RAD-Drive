{"ast":null,"code":"var _jsxFileName = \"E:\\\\GitHub\\\\cornelderDrive\\\\src\\\\components\\\\table-details\\\\AddEdit.js\";\nimport React, { useEffect, useState } from 'react';\nimport { useParams } from \"react-router-dom\";\nimport \"./AddEdit.css\";\nimport fireDb from \"../../firebase\";\nimport { toast } from \"react-toastify\";\nconst initialState = {\n  name: \"\",\n  email: \"\"\n};\n\nconst AddEdit = () => {\n  const [state, setState] = useState(initialState);\n  const [data, setData] = useState({});\n  const {\n    name,\n    email\n  } = state;\n  const {\n    id\n  } = useParams();\n  useEffect(() => {\n    fireDb.child(\"tableDetail\").on(\"value\", snapshot => {\n      if (snapshot.val() !== null) {\n        setData({ ...snapshot.val()\n        });\n      } else {\n        setData({});\n      }\n    });\n    return () => {\n      setData({});\n    };\n  }, [id]);\n  useEffect(() => {\n    if (id) {\n      setState({ ...data[id]\n      });\n    } else {\n      setState({ ...initialState\n      });\n    }\n\n    return () => {\n      setState({ ...initialState\n      });\n    };\n  }, [id, data]);\n\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setState({ ...state,\n      [name]: value\n    });\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    if (!name || !email) {\n      toast.error(\"Please provied value in each input field!\");\n    } else {\n      if (!id) {\n        fireDb.child(\"tableDetail\").push(state, err => {\n          if (err) {\n            toast.error(err);\n          } else {\n            toast.success(\"Information Added Successfully\");\n          }\n        });\n      } else {\n        fireDb.child(`tableDetail/${id}`).set(state, err => {\n          if (err) {\n            toast.error(err);\n          } else {\n            toast.success(\"Information Updated Successfully\");\n          }\n        });\n      }\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"name\",\n    name: \"name\",\n    placeHolder: \"Enter the Specification...\",\n    value: name || \"\",\n    onChange: handleInputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"email\",\n    name: \"email\",\n    placeHolder: \"Enter the Details...\",\n    value: email || \"\",\n    onChange: handleInputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"submit\",\n    value: id ? \"Update\" : \"Save\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }\n  })));\n};\n\nexport default AddEdit;","map":{"version":3,"sources":["E:/GitHub/cornelderDrive/src/components/table-details/AddEdit.js"],"names":["React","useEffect","useState","useParams","fireDb","toast","initialState","name","email","AddEdit","state","setState","data","setData","id","child","on","snapshot","val","handleInputChange","e","value","target","handleSubmit","preventDefault","error","push","err","success","set"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport {useParams} from \"react-router-dom\";\r\nimport \"./AddEdit.css\";\r\nimport fireDb from \"../../firebase\";\r\nimport {toast} from \"react-toastify\";\r\n\r\n\r\nconst initialState = {\r\n  name: \"\",\r\n  email: \"\",\r\n}\r\n\r\nconst AddEdit = () => {\r\n  const [state, setState] = useState(initialState);\r\n  const [data, setData] = useState({});\r\n\r\n  const {name, email} = state;\r\n\r\n\r\n  const {id} = useParams();\r\n\r\n  useEffect(() => {\r\n    fireDb.child(\"tableDetail\").on(\"value\", (snapshot) => {\r\n      if(snapshot.val()!== null){\r\n        setData({...snapshot.val()});\r\n      }else {\r\n        setData({});\r\n      }\r\n    });\r\n    return() => {\r\n      setData({});\r\n    };\r\n  }, [id]);\r\n\r\n  useEffect(() =>{\r\n    if(id){\r\n      setState({...data[id]})\r\n    }else {\r\n      setState({...initialState})\r\n    }\r\n    return() => {\r\n      setState({...initialState})\r\n    }\r\n  }, [id, data])\r\n\r\n\r\n\r\n  const handleInputChange = (e) => {\r\n    const {name, value} = e.target;\r\n    setState({ ...state, [name]: value });\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if(!name || !email){\r\n      toast.error(\"Please provied value in each input field!\")\r\n    } else{\r\n        if(!id){\r\n          fireDb.child(\"tableDetail\").push(state, (err) => {\r\n            if(err){\r\n              toast.error(err);\r\n            }else{\r\n              toast.success(\"Information Added Successfully\");\r\n            }\r\n          });    \r\n        }else{\r\n            fireDb.child(`tableDetail/${id}`).set(state, (err) => {\r\n              if(err){\r\n                toast.error(err);\r\n              }else{\r\n                toast.success(\"Information Updated Successfully\");\r\n              }\r\n            });\r\n        }\r\n    }\r\n  };\r\n  return (\r\n    <div>\r\n      <form onSubmit={handleSubmit}>\r\n\r\n\r\n        {/* imput field Enter a Specification */}\r\n        {/* <label htmlFor='name'>Specification</label> */}\r\n        <input type=\"text\" id=\"name\" name=\"name\" placeHolder=\"Enter the Specification...\" value={name || \"\"} onChange={handleInputChange} />\r\n\r\n\r\n        {/* imput filed Enter Details */}\r\n        {/* <label htmlFor='email'>Details</label> */}\r\n        <input type=\"text\" id=\"email\" name=\"email\" placeHolder=\"Enter the Details...\" value={email || \"\"} onChange={handleInputChange} />\r\n\r\n        <input type=\"submit\" value={id ? \"Update\" : \"Save\"} />\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AddEdit;\r\n"]},"metadata":{},"sourceType":"module"}