{"ast":null,"code":"import _defineProperty from\"E:\\\\GitHub\\\\CornelderDrive\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"E:\\\\GitHub\\\\CornelderDrive\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"E:\\\\GitHub\\\\CornelderDrive\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useHistory,useParams}from\"react-router-dom\";import\"./AddEdit.css\";import fireDb from\"../../firebase\";import{toast}from\"react-toastify\";var initialState={name:\"\",email:\"\"};var AddEdit=function AddEdit(){var _useState=useState(initialState),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];var name=state.name,email=state.email;var history=useHistory();var _useParams=useParams(),id=_useParams.id;useEffect(function(){fireDb.child(\"tableDetail\").on(\"value\",function(snapshot){if(snapshot.val()!==null){setData(_objectSpread({},snapshot.val()));}else{setData({});}});return function(){setData({});};},[id]);useEffect(function(){if(id){setState(_objectSpread({},data[id]));}else{setState(_objectSpread({},initialState));}return function(){setState(_objectSpread({},initialState));};},[id,data]);var handleInputChange=function handleInputChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setState(_objectSpread(_objectSpread({},state),{},_defineProperty({},name,value)));};var handleSubmit=function handleSubmit(e){e.preventDefault();if(!name||!email){toast.error(\"Please provied value in each input field!\");}else{if(!id){fireDb.child(\"tableDetail\").push(state,function(err){if(err){toast.error(err);}else{toast.success(\"Information Added Successfully\");}});}else{fireDb.child(\"tableDetail/\".concat(id)).set(state,function(err){if(err){toast.error(err);}else{toast.success(\"Information Updated Successfully\");}});setTimeout(function(){return history.push(\"/\");},500);}}};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"name\",name:\"name\",placeHolder:\"Enter the Specification...\",value:name||\"\",onChange:handleInputChange}),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"email\",name:\"email\",placeHolder:\"Enter the Details...\",value:email||\"\",onChange:handleInputChange}),/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:id?\"Update\":\"Save\"})));};export default AddEdit;","map":{"version":3,"sources":["E:/GitHub/CornelderDrive/src/components/table-details/AddEdit.js"],"names":["React","useEffect","useState","useHistory","useParams","fireDb","toast","initialState","name","email","AddEdit","state","setState","data","setData","history","id","child","on","snapshot","val","handleInputChange","e","target","value","handleSubmit","preventDefault","error","push","err","success","set","setTimeout"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport { useHistory, useParams} from \"react-router-dom\";\r\nimport \"./AddEdit.css\";\r\nimport fireDb from \"../../firebase\";\r\nimport {toast} from \"react-toastify\";\r\n\r\n\r\nconst initialState = {\r\n  name: \"\",\r\n  email: \"\",\r\n}\r\n\r\nconst AddEdit = () => {\r\n  const [state, setState] = useState(initialState);\r\n  const [data, setData] = useState({});\r\n\r\n  const {name, email} = state;\r\n\r\n  const history = useHistory();\r\n\r\n\r\n  const {id} = useParams();\r\n\r\n  useEffect(() => {\r\n    fireDb.child(\"tableDetail\").on(\"value\", (snapshot) => {\r\n      if(snapshot.val()!== null){\r\n        setData({...snapshot.val()});\r\n      }else {\r\n        setData({});\r\n      }\r\n    });\r\n    return() => {\r\n      setData({});\r\n    };\r\n  }, [id]);\r\n\r\n  useEffect(() =>{\r\n    if(id){\r\n      setState({...data[id]})\r\n    }else {\r\n      setState({...initialState})\r\n    }\r\n    return() => {\r\n      setState({...initialState})\r\n    }\r\n  }, [id, data])\r\n\r\n\r\n\r\n  const handleInputChange = (e) => {\r\n    const {name, value} = e.target;\r\n    setState({ ...state, [name]: value });\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if(!name || !email){\r\n      toast.error(\"Please provied value in each input field!\")\r\n    } else{\r\n        if(!id){\r\n          fireDb.child(\"tableDetail\").push(state, (err) => {\r\n            if(err){\r\n              toast.error(err);\r\n            }else{\r\n              toast.success(\"Information Added Successfully\");\r\n            }\r\n          });    \r\n        }else{\r\n            fireDb.child(`tableDetail/${id}`).set(state, (err) => {\r\n              if(err){\r\n                toast.error(err);\r\n              }else{\r\n                toast.success(\"Information Updated Successfully\");\r\n              }\r\n            });\r\n            setTimeout(() => history.push(\"/\"), 500);\r\n        }\r\n    }\r\n  };\r\n  return (\r\n    <div>\r\n      <form onSubmit={handleSubmit}>\r\n\r\n\r\n        {/* imput field Enter a Specification */}\r\n        {/* <label htmlFor='name'>Specification</label> */}\r\n        <input type=\"text\" id=\"name\" name=\"name\" placeHolder=\"Enter the Specification...\" value={name || \"\"} onChange={handleInputChange} />\r\n\r\n\r\n        {/* imput filed Enter Details */}\r\n        {/* <label htmlFor='email'>Details</label> */}\r\n        <input type=\"text\" id=\"email\" name=\"email\" placeHolder=\"Enter the Details...\" value={email || \"\"} onChange={handleInputChange} />\r\n\r\n        <input type=\"submit\" value={id ? \"Update\" : \"Save\"} />\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AddEdit;\r\n"]},"metadata":{},"sourceType":"module"}